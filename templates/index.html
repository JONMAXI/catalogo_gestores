{% extends "base.html" %}

{% block content %}
<h3 class="mb-4">Listado de Personas</h3>


<div class="table-wrapper">
  <table id="personasTable" class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Nombre Completo</th>
        <th>Teléfono</th>
        <th>Puesto</th>
        <th>Estatus</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for persona in data %}
      <tr>
        <td>{{ persona.nombre_completo }}</td>
        <td>{{ persona.departamento or '' }}</td>
        <td>{{ persona.puesto or '' }}</td>
        <td>{{ persona.estatus or '' }}</td>
        <td>
          <a href="{{ url_for('editar_persona', persona_id=persona.id) }}" class="btn btn-sm btn-warning mb-1" title="Editar">
            <i class="fa-solid fa-pen-to-square"></i>
          </a>
          <a href="{{ url_for('documentacion_persona', persona_id=persona.id) }}" class="btn btn-sm btn-info mb-1" title="Documentación">
            <i class="fa-solid fa-file"></i>
          </a>
          {% if persona.estatus != 'Baja' %}
          <a href="{{ url_for('baja_persona', persona_id=persona.id) }}" class="btn btn-sm btn-danger mb-1" title="Dar de Baja">
            <i class="fa-solid fa-user-slash"></i>
          </a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- jQuery primero -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

<!-- DataTables CSS y JS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
  $(document).ready(function() {
    $('#personasTable').DataTable({
      "language": {
        "search": "Buscar:",
        "lengthMenu": "Mostrar _MENU_ registros",
        "info": "Mostrando _START_ a _END_ de _TOTAL_ registros",
        "paginate": {
          "first": "Primero",
          "last": "Último",
          "next": "Siguiente",
          "previous": "Anterior"
        }
      },
      "pageLength": 10
    });
  });
</script>
{% endblock %}
